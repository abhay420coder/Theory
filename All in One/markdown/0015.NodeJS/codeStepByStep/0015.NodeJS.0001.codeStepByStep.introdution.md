# export and import

## export module or object

### syntax of export

#### syntax of export with exports

```js
// export method 1
exports.variable1 = variable1;
exports.variable2 = variable2;
exports.variable3 = variable3;
-----------------------------
-----------------------------
exports.variableN = variableN;

// or


// export method 2
exports.variable1 = value1;
exports.variable2 = value2;
exports.variable3 = value3;
--------------------------
--------------------------
exports.variableN = valueN;
```

#### syntax of export with module.exports

```js

// export method 2
module.exports = {
  variable1: variable1,
  variable2: variable2,
  variable3: variable3,
  --------------------,
  --------------------,
  variableN: variableN,
};


// or

// export method 2
module.exports = {
  variable1: value1,
  variable2: value2,
  variable3: value3,
  -----------------,
  -----------------,
  variableN: valueN,
};
```

### `module.exports` vs `exports`

| `module.exports`                                                                                                                                      | `exports`                                                                                                                          |
| ------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------ |
| We can call `module.exports` only once in our module.                                                                                                 | We can call or use `exports` multiple times in our module.                                                                         |
| It is the object reference that gets returned from the `require()` calls.                                                                             | `exports` are not returned by `require()`. <br />It is just a reference to the `module. exports`.                              |
| We can not cherry-pick some particular objects <br />which we need to import in our application <br />i.e., we will have to import the complete module. | Using destructuring assignment, <br />we can cherry-pick some particular objects <br />which we need to import into our application. |

### example of export

#### example of export  with exports

* `user.js`

```js
const getName = () => {
  return 'Jim';
};

const getLocation = () => {
  return 'Munich';
};

const dateOfBirth = '12.01.1982';


// export method 1
exports.getName = getName;
exports.getLocation = getLocation;
exports.dob = dateOfBirth;

// or

// export method 2
exports.getName = () => {
  return 'Jim';
};

exports.getLocation = () => {
  return 'Munich';
};

exports.dob= '12.01.1982';
```

#### example of export  with module.exports

* `user.js`

```js
const getName = () => {
  return 'Jim';
};

const getLocation = () => {
  return 'Munich';
};

const dateOfBirth = '12.01.1982';

// export method 1
module.exports = {
  getName: getName,
  getLocation: getLocation,
  dob: dateOfBirth,
};

// or

// export method 2
module.exports = {
  getName: () => {
    return 'Jim';
  },

  getLocation: () => {
    return 'Munich';
  },

  dob: '12.01.1982',
};
```

## import module or object

### Syntax of import

#### Syntax of import  with whole module

```js
const moduleName = require('path');

// access variable or function from module

moduleName.variable1 
moduleName.variable2 
--------------------
moduleName.variableN 



moduleName.functionName1() 
moduleName.functionName2() 
------------------------
moduleName.functionNameN() 
```

#### syntax of import  with whole module

```js

const { variable1, variable2, ....., variableN, function1, function2, ....., functionN } = require('path');

// access variable or function from module

variable1 
variable2 
--------- 
variableN



function1() 
function2() 
----------- 
functionN()
```

### example of import

#### example of import  with whole module

* `index.js`

```js
const user = require('./user');
console.log(
  `${user.getName()} lives in ${user.getLocation()} and was born on ${user.dob}.`
);
```

#### example of import  with destructuring assignment from module

* or `index.js` (by destructuring assignment )

```js
const { getName, dob , getLocation } = require('./user');
console.log(
  `${getName()} lives in ${getLocation()} and was born on ${dob}.`
);
```

# file path and directory path

```js
console.log("file psth" , __filename);
console.log("directory path" , __dirname);
```

# Http Module

## Node.js as a Web Server

* The HTTP module can create an HTTP server

  * that listens to server ports and
  * gives a response back to the client.
* Use the `createServer()` method to create an HTTP server:

```js

// Get your own Node.js Server
var http = require('http');

//create a server object:
http.createServer(function (req, res) {
  res.write('Hello World!'); //write a response to the client
  res.end(); //end the response
}).listen(8080); //the server object listens on port 8080
```

```js
var http = require('http');

let creareServerFunction = (req,res) =>{
  res.write('Hello World!');
  res.end();
}

http.createServer(creareServerFunction).listen(8080)
```

## Add an HTTP Header

* If the response from the HTTP server is supposed to be displayed as HTML,
  * you should include an HTTP header with the correct content type:

### Add an HTTP Header :- syntax :-

```js

// method -1

// set status
res.statusCode = okStatus;

// set header
res.setHeader('Content-Type' , 'application\json')
res.setHeader('file' , 'pdf')
res.setHeader('name' , 'Abhay')

// method -2

// set header and status
let headers = {'Content-Type' : 'application\json' , 'file' : 'json' , 'name' : 'Abhay'}
res.writeHead(okStatus , headers);

```

### Add an HTTP Header :-  Example

```js

var http = require('http');

http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/html'});
  res.write('Hello World!');
  res.end();
}).listen(8080);
```

## Read the Query String

* The function passed into the `http.createServer()` has a req argument

  * that represents the request from the client, as an object (`http.IncomingMessage` object).
* This object has a property called "url" which holds the part of the url

  * that comes after the domain name:

`demo_http_url.js`

```js
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/html'});
  res.write(req.url);
  res.end();
}).listen(8080);
```

## Split the Query String

* There are built-in modules to easily split the query string into readable parts, such as the URL module.

### example 1:- Split the Query String

```js

// Split the query string into readable parts:

var http = require('http');
var url = require('url');

http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/html'});
  var q = url.parse(req.url, true).query;
  var txt = q.year + " " + q.month;
  res.end(txt);
}).listen(8080);
```

### example 2:- Split the Query String

```js
// Split a web address into readable parts:

var url = require('url');
var adr = 'http://localhost:8080/default.htm?year=2017&month=february';
var q = url.parse(adr, true);

console.log(q.host); //returns 'localhost:8080'
console.log(q.pathname); //returns '/default.htm'
console.log(q.search); //returns '?year=2017&month=february'

var qdata = q.query; //returns an object: { year: 2017, month: 'february' }
console.log(qdata.month); //returns 'february'
```

## Node.js File Server

* Let us combine the two, and serve the file requested by the client.
* Create two html files and save them in the same folder as your node.js files.

### html part :- Node.js File Server

`summer.html`

```html
<!DOCTYPE html>
<html>
<body>
<h1>Summer</h1>
<p>I love the sun!</p>
</body>
</html>
```

`winter.html`

```html
<!DOCTYPE html>
<html>
<body>
<h1>Winter</h1>
<p>I love the snow!</p>
</body>
</html>
```

### js part :- Node.js File Server

Create a Node.js file that opens the requested file and returns the content to the client. If anything goes wrong, throw a 404 error:

`demo_fileserver.js`

```js
var http = require('http');
var url = require('url');
var fs = require('fs');

http.createServer(function (req, res) {
  var q = url.parse(req.url, true);
  var filename = "." + q.pathname;
  fs.readFile(filename, function(err, data) {
    if (err) {
      res.writeHead(404, {'Content-Type': 'text/html'});
      return res.end("404 Not Found");
    } 
    res.writeHead(200, {'Content-Type': 'text/html'});
    res.write(data);
    return res.end();
  });
}).listen(8080);
```

# create first api

## export status code

* create assets folder.
* create `status.js` file inside assets folder
* `status.js`

```js
let statusCode = {
    informationResponses:{
        continue : 101,
        switchingProtocols:101,
        processing:102,
        earlyHints:103,
    },
    successfulResponse :{
        ok : 200,
        created:201,
        accepted:202,
        nonAuthorativeInformation:203,
        noContent:204,
        resetContent:205,
        partialContent:206,
        multiStatus:207,
        alreadyReported:208,
        imUsed:226,
    },
    redirectingMessages:{
        multipleChoice:300,
        movedPermanently:301,
        found:302,
        seeOther:303,
        notModified:304,
        useProxy:305,
        unused:306,
        temporaryRedirect:307,
        permanentRedirect:308,
    },
    clientErrorResponses :{
        badRequest:400,
        unauthorized:401,
        paymentRequired:402,
        forbidden:403,
        notFound:404,
        methodNotAllowed:405,
        notAcceptable:406,
        proxyAuthenticationRequired:407,
        requestTimeout:408,
        conflict:409,
        gone:410,
        lengthRequired:411,
        preconditionFailed:412,
        payloadTooLarge:413,
        uriTooLong:414,
        unSupportedMediaType:415,
        rangeNotSatisfiable:416,
        expectationFailed:417,
        iMaTeapot:418,
        misDirectedRequest:421,
        unProcessableConetnt:422,
        locked:423,
        failedDependency:424,
        tooEarly:425,
        upgradeRequired:426,
        preConditionRequired:428,
        tooManyRequests:429,
        requestHeaderFieldsTooLarge:431,
        unAvailableForLegalReasons:451,
    },
    serverErrorResponses : {
        internalServerError:500,
        notImplemented:501,
        badGateway:502,
        serviceUnAvailable:503,
        gatewayTimeout:504,
        httpVersionNotSupported:505,
        variantAlsoNegotiates:506,
        insufficientStorage:507,
        loopDirected:508,
        notExtended:510,
        networkAuthenticateRequired:511,
    },
};

module.exports = statusCode
```

## set status and header

```js
// method -1

// set status
res.statusCode = okStatus;

// set header
res.setHeader('Content-Type' , 'application\json')
res.setHeader('file' , 'pdf')
res.setHeader('name' , 'Abhay')




// method -2

// set header and status
let headers = {'Content-Type' : 'application\json' , 'file' : 'json' , 'name' : 'Abhay'}
res.writeHead(okStatus , headers);


```

## create simple api method -1

* `index.js`

```js

const http = require('http');

const status = require('./assets/status');
const okStatus = status.status.successfulResponse.ok;

let responseData1 = [
        {name:"Abhay Kumar 1",age:241},
        {name:"Abhay Kumar 2",age:242},
        {name:"Abhay Kumar 3",age:243},
        {name:"Abhay Kumar 4",age:244},
    ]; 

let responseData2 = [
        {name:"Abhay Kumar 11",age:1241},
        {name:"Abhay Kumar 12",age:1242},
        {name:"Abhay Kumar 13",age:1243},
        {name:"Abhay Kumar 14",age:1244},
    ];
  
let port = 5400;


// http.createServer(callBackFunctionOfRequestAndRsponse).listen(port)

http.createServer((req , res) =>{

    // set status
    // res.statusCode = okStatus;


    // set header
    // res.setHeader('Content-Type' , 'application\json')
    // res.setHeader('file' , 'pdf')
    // res.setHeader('name' , 'Abhay')


    // set header and status
    let headers = {'Content-Type' : 'application\json' , 'file' : 'json' , 'name' : 'Abhay'}
    res.writeHead(okStatus , headers);

    console.log(`server is running on ${port}`);
    res.write(JSON.stringify(responseData1))
    res.end()
}).listen(port);

```

* run in url in postman  `http://localhost:5400/`

## create simple api method -2

* `index.js`

```js
const http = require('http');

let responseData = {
    name:"Abhay Kumar"
}; 

let port = 5400;

let statusCode = {
    successfulResponse :{
        ok : 200,
        created:201,
    },
};


let headers = {
    'Content-Type' : 'application\json'
}

// http.createServer(callBackFunctionOfRequestAndRsponse).listen(port)  // to create server

http.createServer((req , res) =>{
    res.writeHead(statusCode.successfulResponse.ok , headers);
    console.log(`server is running on ${port}`);
    res.write(JSON.stringify(responseData))
    res.end()
}).listen(port);

```

* run in url in postman  `http://localhost:5400/`

## create simple api method -3

```js
const http = require('http');

let responseData = {
    name:"Abhay Kumar"
}; 

let port = 5400;

let statusCode = {
    successfulResponse :{
        ok : 200,
        created:201,
    },
};


let headers = {
    'Content-Type' : 'application\json'
}

// http.createServer(callBackFunctionOfRequestAndRsponse).listen(port)  // to create server
let creareServerFunction = (req,res) =>{
    res.writeHead(statusCode.successfulResponse.ok , headers);
    console.log(`server is running on ${port}`);
    res.write(JSON.stringify(responseData))
    res.end()
}

http.createServer(creareServerFunction).listen(port)
```

# make first HTML web page

```js

const http = require('http');
let port = 5400;

// http.createServer(callBackFunctionOfRequestAndRsponse).listen(port)


http.createServer((req , res) =>{
    // set header and status
    let headers = {'Content-Type' : 'application\json' , 'file' : 'json' , 'name' : 'Abhay'}
    let okStatus =200;
    res.writeHead(okStatus , headers);

    console.log(`server is running on ${port}`);

    let ourHtml = `<div style="height: 100vh;
    width: 100vw;
    display: flex;
    justify-content: center;
    flex-direction: column;
    align-items: center;">
        <div 
        style="border-color: red;
        border-width: 1px;
        border-style: solid;
        height: 10rem;
        width: 15rem;
        border-radius: 5px;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        margin-bottom: 2rem;
        ">
            <h3>Abhay Kumar</h3>
            <h4>age : 24</h4>
        </div>
        <button>Hi</button>
    </div>`

    res.write(ourHtml)
    res.end();
}).listen(port);

```

* run in browser  `http://localhost:5400/`

# node package manager

## initialize npm

* run command `npm init` in command line

## initialize npm by default

* run command `npm init -y` in command line

## install package

* run command `npm install packageName --save` in command line

## uninstall package

* run command `npm uninstall packageName` in command line

## install uppercase

run command `npm uninstall upper-case` in command line

## import package

`let variableName = require("packageName")`

## example of import package and use package

```js

const http = require('http');
let uc = require("upper-case")

let port = 5400;

// http.createServer(callBackFunctionOfRequestAndRsponse).listen(port)


http.createServer((req , res) =>{

    let headers = {'Content-Type' : 'application\json' , 'file' : 'json' , 'name' : 'Abhay'}
    let okStatus =200;
    res.writeHead(okStatus , headers);

    console.log(`server is running on ${port}`);

  
    let data = "node module";
    res.write(data)
    res.write(uc.upperCase(data))
    res.end();
}).listen(port);

```

* run in browser  `http://localhost:5400/`

# send mail from local server in node js

* `index.js`

```js

// send mail from local server in node js

// Step 1 :- install nodemailer package
// step 2 :- allow less secure app https://myaccount.google.com/lesssecureapps
// step 3 :- write program
// step 4 :- check mail 

const nodemailer = require('nodemailer');

let transport = nodemailer.createTransport({
    host:'smtp.gmail.com', // host of gmail
    port:587, // port of gmail
    secure:false,
    requireTLS:true,
    auth:{
        user:'kabilraees420@gmail.com',
        pass:'Amu@70505'
    }
});

let mailOptions ={
    from: 'kabilraees420@gmail.com',
    to: 'ak8294836065@gmail.com',
    subject:'test node mail',
    text:'Hello Abhay'
}

transport.sendMail(mailOptions,(error,info)=>{
    if(error)console.log(error);
    else console.warn("email has been sent");
})

```

* run `node index.js` in command line

# install nodemon :- change without restart

## install nodemon

* run `npm i nodemon ` in command line
* then run `nodemon index.js`
* index.js

```js
const http = require('http');

let responseData1 = [
        {name:"Abhay Kumar 1",age:241},
        {name:"Abhay Kumar 2",age:242},
        {name:"Abhay Kumar 3",age:243},
        {name:"Abhay Kumar 4",age:244},
    ]; 
let port = 5400;

// http.createServer(callBackFunctionOfRequestAndRsponse).listen(port)


http.createServer((req , res) =>{

    let headers = {'Content-Type' : 'application\json' , 'file' : 'json' , 'name' : 'Abhay'}
    let okStatus =200;
    res.writeHead(okStatus , headers);
  
    console.log(`server is running on ${port}`);

    res.write(JSON.stringify(responseData1))
    res.end();
}).listen(port);


```

# getting input from command line

`index.js`

```js
console.log(process.argv)
```

* run command `node index.js hello man "jid cdsdf fsfd"` in command line
* output

```js
[
  'C:\\Program Files\\nodejs\\node.exe',     
  'C:\\abhay data\\project\\our github\\Theory\\All in One\\markdown\\0015.NodeJS\\codeStepByStep\\project\\index.js',
  'hello',
  'man',
  'jid cdsdf fsfd'
]
```

* example :-

```c
C:\abhay data\project\our github\Theory\All in One\markdown\0015.NodeJS\codeStepByStep\project>node index.js hello man "jid cdsdf fsfd"
[
  'C:\\Program Files\\nodejs\\node.exe',     
  'C:\\abhay data\\project\\our github\\Theory\\All in One\\markdown\\0015.NodeJS\\codeStepByStep\\project\\index.js',
  'hello',
  'man',
  'jid cdsdf fsfd'
]

C:\abhay data\project\our github\Theory\All in One\markdown\0015.NodeJS\codeStepByStep\project> 
```

## create and remove fie using input from command line

* `index.js`

```js
const fs = require('fs');

const input = process.argv;

if(input[2]=='add')fs.writeFileSync(input[3] , input[4])
else if(input[2]=='remove') fs.unlinkSync(input[3])
else console.log("invalid input");
```

* then run `node index.js add orange.txt "this is orange color and fruit"` in command line
* then run `node index.js add yellow.txt "this is yellow color and fruit"` in command line
* then run `node index.js remove orange.txt` in command line
* then run `node index.js remove yellow.txt` in command line

# Display file list from folder

```js


const fs = require('fs');
const path = require('path');

// const directoryPath = path.join(__dirname) // it will return you current directory
// console.warn("directoryPath :-  " , directoryPath) // directoryPath :-   C:\abhay data\project\our github\Theory\All in One\markdown\0015.NodeJS\codeStepByStep\project

const directoryPath = path.join(__dirname , "folderName") // if folderName exist then it will return you directory path of folderName 
console.warn("directoryPath :-  " , directoryPath) // directoryPath :-   C:\abhay data\project\our github\Theory\All in One\markdown\0015.NodeJS\codeStepByStep\project


// create multiple file inside folder folderName
// for(let i=0; i<5; i++){
//   fs.writeFileSync(`${directoryPath}/hello${i}.txt` , `a simple text file ${i}`)
// }

// get filelist from folder
fs.readdir(directoryPath , (err, files)=>{
  console.warn("all files :-  ",files);
  console.warn("1st files :-  ",files[0]);
  console.warn("2nd files :-  ",files[1]);
  console.warn("3th files :-  ",files[2]);
  console.warn("4th files :-  ",files[3]);
  console.warn("5th files :-  ",files[4]);
})

/* 
output :- 

all files :-   [
  'hello0.txt',
  'hello1.txt',
  'hello2.txt',
  'hello3.txt',
  'hello4.txt'
]
1st files :-   hello0.txt
2nd files :-   hello1.txt
3th files :-   hello2.txt
4th files :-   hello3.txt
5th files :-   hello4.txt
*/
```

# file system module

## crud opperation with file system

```js
const fs = require('fs');
const path = require('path');

const directoryPath = path.join(__dirname , "crud")
const filePath = `${directoryPath}/apple.txt` ;

// create file  
fs.writeFileSync(filePath , `This is a simple text file.`);

// read file
fs.readFile(filePath ,  (err,item)=>{
    console.log(item); // we will get buffer
})

fs.readFile(filePath , 'utf8' , (err,item)=>{
    console.log(item); // we will get raw data
})

// update file (add data on exiting file)
fs.appendFile(filePath , ' we are appending file' , (err)=>{
    if(!err) console.log("file is updated"); // we will get raw data
})

// rename file
fs.rename(filePath , `${directoryPath}/fruit.txt`);

// delete file 
fs.unlinkSync(`${directoryPath}/fruit.txt`)

```

## Read Files

* The `fs.readFile()` method is used to read files on your computer.

### `fs.readFile()`

```js
var http = require('http');
var fs = require('fs');
http.createServer(function (req, res) {
  fs.readFile('./demofile1.html', function(err, data) {
    res.writeHead(200, {'Content-Type': 'text/html'});
    res.write(data);
    return res.end();
  });
}).listen(8080);
```

## Create Files

* The File System module has methods for creating new files:
* `fs.appendFile()`

  * The fs.appendFile() method appends specified content to a file.
  * If the file does not exist, the file will be created
* `fs.open()`

  * The fs.open() method takes a "flag" as the second argument,
    * if the flag is "w" for "writing",
    * the specified file is opened for writing.
  * If the file does not exist, an empty file is created:
* `fs.writeFile()`

  * The fs.writeFile() method replaces the specified file and content if it exists.
  * If the file does not exist, a new file, containing the specified content, will be created:

### `fs.appendFile()`

* The fs.appendFile() method appends specified content to a file.
* If the file does not exist, the file will be created:

```js
var fs = require('fs');

fs.appendFile('mynewfile1.txt', 'Hello content!', function (err) {
  if (err) throw err;
  console.log('Saved!');
});
```

### `fs.open()`

* The fs.open() method takes a "flag" as the second argument,
  * if the flag is "w" for "writing",
  * the specified file is opened for writing.
* If the file does not exist, an empty file is created:

```js
// Create a new, empty file using the open() method:

var fs = require('fs');

fs.open('mynewfile2.txt', 'w', function (err, file) {
  if (err) throw err;
  console.log('Saved!');
});

```

### `fs.writeFile()`

* The fs.writeFile() method replaces the specified file and content if it exists.
* If the file does not exist, a new file, containing the specified content, will be created:

```js

// Create a new file using the writeFile() method:

var fs = require('fs');

fs.writeFile('mynewfile3.txt', 'Hello content!', function (err) {
  if (err) throw err;
  console.log('Saved!');
});

```

## Update Files

* The File System module has methods for updating files:
* `fs.appendFile()`

  * The fs.appendFile() method appends specified content to a file.
  * If the file does not exist, the file will be created
* `fs.writeFile()`

  * The fs.writeFile() method replaces the specified file and content if it exists.
  * If the file does not exist, a new file, containing the specified content, will be created:

## Delete Files

* To delete a file with the File System module,

  * use the `fs.unlink()` method.
* The `fs.unlink()` method deletes the specified file:

### `fs.unlink()`

```js
// Delete "mynewfile2.txt":
var fs = require('fs');
fs.unlink('mynewfile2.txt', function (err) {
  if (err) throw err;
  console.log('File deleted!');
});
```

## Rename Files

* To rename a file with the File System module,
  * use the `fs.rename()` method.
* The `fs.rename()` method renames the specified file:

### `fs.rename()`

```js
// Rename "mynewfile1.txt" to "myrenamedfile.txt":
var fs = require('fs');

fs.rename('mynewfile1.txt', 'myrenamedfile.txt', function (err) {
  if (err) throw err;
  console.log('File Renamed!');
});
```

## upload the file

### Step 1: Create an Upload Form

* Create a Node.js file that writes an HTML form, with an upload field:
* ExampleGet your own Node.js Server

```js
// This code will produce an HTML form:

var http = require('http');

http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/html'});
  res.write('<form action="fileupload" method="post" enctype="multipart/form-data">');
  res.write('<input type="file" name="filetoupload"><br>');
  res.write('<input type="submit">');
  res.write('</form>');
  return res.end();
}).listen(8080);
```

### Step 2: Parse the Uploaded File

* Include the Formidable module to be able to parse the uploaded file once it reaches the server.
* When the file is uploaded and parsed, it gets placed on a temporary folder on your computer.

```js
The file will be uploaded, and placed on a temporary folder:

var http = require('http');
var formidable = require('formidable');

http.createServer(function (req, res) {
  if (req.url == '/fileupload') {
    var form = new formidable.IncomingForm();
    form.parse(req, function (err, fields, files) {
      res.write('File uploaded');
      res.end();
    });
  } else {
    res.writeHead(200, {'Content-Type': 'text/html'});
    res.write('<form action="fileupload" method="post" enctype="multipart/form-data">');
    res.write('<input type="file" name="filetoupload"><br>');
    res.write('<input type="submit">');
    res.write('</form>');
    return res.end();
  }
}).listen(8080);
```

### step :-3 save the file

```js
var http = require('http');
var formidable = require('formidable');
var fs = require('fs');

http.createServer(function (req, res) {
  if (req.url == '/fileupload') {
    var form = new formidable.IncomingForm();
    form.parse(req, function (err, fields, files) {
      var oldpath = files.filetoupload.filepath;
      var newpath = 'C:/Users/Your Name/' + files.filetoupload.originalFilename;
      fs.rename(oldpath, newpath, function (err) {
        if (err) throw err;
        res.write('File uploaded and moved!');
        res.end();
      });
 });
  } else {
    res.writeHead(200, {'Content-Type': 'text/html'});
    res.write('<form action="fileupload" method="post" enctype="multipart/form-data">');
    res.write('<input type="file" name="filetoupload"><br>');
    res.write('<input type="submit">');
    res.write('</form>');
    return res.end();
  }
}).listen(8080);
```

# read file with file system

## syntax for read file

```js
const fs = require('fs');
fs.readFile('/etc/passwd', (err, data) => {
        if (err) throw err;
        console.log(data);
      });
```

## example for read file

```js
const http = require('http');
const fs = require('fs');

let port = 5400;

http.createServer((req , res) =>{

    let headers = {'Content-Type' : 'application\json' , 'file' : 'json' , 'name' : 'Abhay'}
    let okStatus =200;
    // fs.readFile('/etc/passwd', (err, data) => {
    //     if (err) throw err;
    //     console.log(data);
    //   });
    fs.readFile('./index.html' , (error,data)=>{
        res.writeHead(okStatus , headers); // we will set the header and status
        res.write(data); // we will  wtire the data inside the file
        return res.end();  // this function returning to end the response
    })

}).listen(port);


```

# connect with mySql

* install mysql package via npm
  * run `npm install mysql` in command line

## syntax:- connect with mySql

```js
const mysql = require("mysql");

let connection = mysql.createConnection({
    host:"localhost",
    user:"root",
    password:"dns@123",
    database:"resto"
});

connection.connect((error)=>{
    if(error) throw error;

    // connection.query("write sql query here" , function(err,result){
    //     if(err) throw err;
    //     console.warn("all results are here " , result)
    // })

    let sqlQuery = "write sql query here" ;
    connection.query(sqlQuery , function(err,result, fields){
        if(err) throw err;
        console.warn("all results are here " , result)
    })
  
})
```

## example :- connect with mySql

```js
const mysql = require("mysql");

let connection = mysql.createConnection({
    host:"localhost",
    user:"root",
    password:"dns@123",
    database:"resto"
});

connection.connect((error)=>{
    if(error) throw error;
    connection.query("select * from users" , function(err,result){
        if(err) throw err;
        console.warn("all results are here " , result)
        console.warn("all results are here " , result[0])
        console.warn("all results are here " , result[0].name)
    })
})

```

## Creating a Database

* To create a database in MySQL, use the "CREATE DATABASE" statement:

```js
Create a database named "mydb":

var mysql = require('mysql');

var con = mysql.createConnection({
  host: "localhost",
  user: "yourusername",
  password: "yourpassword"
});

con.connect(function(err) {
  if (err) throw err;
  console.log("Connected!");
  con.query("CREATE DATABASE mydb", function (err, result) {
    if (err) throw err;
    console.log("Database created");
  });
});
```

## Creating a Table

* To create a table in MySQL, use the "CREATE TABLE" statement.
* Make sure you define the name of the database when you create the connection:

```js
// Create a table named "customers":

var mysql = require('mysql');

var con = mysql.createConnection({
  host: "localhost",
  user: "yourusername",
  password: "yourpassword",
  database: "mydb"
});

con.connect(function(err) {
  if (err) throw err;
  console.log("Connected!");
  var sqlQuery = "CREATE TABLE customers (name VARCHAR(255), address VARCHAR(255))";
  con.query(sqlQuery, function (err, result) {
    if (err) throw err;
    console.log("Table created");
  });                         
});
```

## insert into table

### Insert Into Table

* To fill a table in MySQL, use the "INSERT INTO" statement.

```js
// Insert a record in the "customers" table:

var mysql = require('mysql');

var con = mysql.createConnection({
  host: "localhost",
  user: "yourusername",
  password: "yourpassword",
  database: "mydb"
});

con.connect(function(err) {
  if (err) throw err;
  console.log("Connected!");
  var sql = "INSERT INTO customers (name, address) VALUES ('Company Inc', 'Highway 37')";
  con.query(sql, function (err, result) {
    if (err) throw err;
    console.log("1 record inserted");
  });
});
```

### Insert Multiple Records

* To insert more than one record,
  * make an array containing the values,
  * and insert a question mark in the sql,
  * which will be replaced by the value array:
  * `INSERT INTO customers (name, address) VALUES ?`

```js
// Fill the "customers" table with data:

var mysql = require('mysql');

var con = mysql.createConnection({
  host: "localhost",
  user: "yourusername",
  password: "yourpassword",
  database: "mydb"
});

con.connect(function(err) {
  if (err) throw err;
  console.log("Connected!");
  var sql = "INSERT INTO customers (name, address) VALUES ?";
  var values = [
    ['John', 'Highway 71'],
    ['Peter', 'Lowstreet 4'],
    ['Amy', 'Apple st 652'],
    ['Hannah', 'Mountain 21'],
    ['Michael', 'Valley 345'],
    ['Sandy', 'Ocean blvd 2'],
    ['Betty', 'Green Grass 1'],
    ['Richard', 'Sky st 331'],
    ['Susan', 'One way 98'],
    ['Vicky', 'Yellow Garden 2'],
    ['Ben', 'Park Lane 38'],
    ['William', 'Central st 954'],
    ['Chuck', 'Main Road 989'],
    ['Viola', 'Sideway 1633']
  ];
  con.query(sql, [values], function (err, result) {
    if (err) throw err;
    console.log("Number of records inserted: " + result.affectedRows);
  });
});
```

### Get Inserted ID

* For tables with an auto increment id field, you can get the id of the row you just inserted by asking the result object.
* Note: To be able to get the inserted id, only one row can be inserted.

```js
// Insert a record in the "customers" table, and return the ID:

var mysql = require('mysql');

var con = mysql.createConnection({
  host: "localhost",
  user: "yourusername",
  password: "yourpassword",
  database: "mydb"
});

con.connect(function(err) {
  if (err) throw err;
  var sql = "INSERT INTO customers (name, address) VALUES ('Michelle', 'Blue Village 1')";
  con.query(sql, function (err, result) {
    if (err) throw err;
    console.log("1 record inserted, ID: " + result.insertId);
  });
});
```

## MySql Select From

### Selecting From a Table

* To select data from a table in MySQL, use the "SELECT" statement.

```js
// Select all records from the "customers" table, and display the result object:

var mysql = require('mysql');

var con = mysql.createConnection({
  host: "localhost",
  user: "yourusername",
  password: "yourpassword",
  database: "mydb"
});

con.connect(function(err) {
  if (err) throw err;
  let myQuery = `SELECT * FROM customers`
  con.query(myQuery, function (err, result, fields) {
    if (err) throw err;
    console.log(result);
  });
});
```

### Selecting Columns

* To select only some of the columns in a table,
  * use the "SELECT" statement followed by the column name.

```js
// Select name and address from the "customers" table, and display the return object:

var mysql = require('mysql');

var con = mysql.createConnection({
  host: "localhost",
  user: "yourusername",
  password: "yourpassword",
  database: "mydb"
});

con.connect(function(err) {
  if (err) throw err;
  let myQuery = `SELECT name, address FROM customers`
  con.query(myQuery, function (err, result, fields) {
    if (err) throw err;
    console.log(result);
  });
});
```

### The Fields Object

* The third parameter of the callback function is an array containing information about each field in the result.

```js
// Select all records from the "customers" table, and display the fields object:

var mysql = require('mysql');

var con = mysql.createConnection({
  host: "localhost",
  user: "yourusername",
  password: "yourpassword",
  database: "mydb"
});

con.connect(function(err) {
  if (err) throw err;
  con.query("SELECT name, address FROM customers", function (err, result, fields) {
    if (err) throw err;
    console.log(fields);
  });
});
```

## mysql Where

### Select With a Filter

* When selecting records from a table, you can filter the selection by using the "WHERE" statement:

```js
// Select record(s) with the address "Park Lane 38":

var mysql = require('mysql');

var con = mysql.createConnection({
  host: "localhost",
  user: "yourusername",
  password: "yourpassword",
  database: "mydb"
});

con.connect(function(err) {
  if (err) throw err;
  let myQuery = `SELECT * FROM customers WHERE address = 'Park Lane 38'`
  con.query(myQuery, function (err, result) {
    if (err) throw err;
    console.log(result);
  });
});
```

### Wildcard Characters

* You can also select the records that starts, includes, or ends with a given letter or phrase.
* Use the '%' wildcard to represent zero, one or multiple characters:

```js
// Select records where the address starts with the letter 'S':

var mysql = require('mysql');

var con = mysql.createConnection({
  host: "localhost",
  user: "yourusername",
  password: "yourpassword",
  database: "mydb"
});

con.connect(function(err) {
  if (err) throw err;
  let myQuery = `SELECT * FROM customers WHERE address LIKE 'S%'`
  con.query(myQuery, function (err, result) {
    if (err) throw err;
    console.log(result);
  });
});
```

### Escaping Query Values

* When query values are variables provided by the user,

  * you should escape the values.
* This is to prevent SQL injections,

  * which is a common web hacking technique to destroy or misuse your database.

#### Escape query values by using the `mysql.escape()` method:

* The MySQL module has methods to escape query values:

```js
var adr = 'Mountain 21';
var sql = 'SELECT * FROM customers WHERE address = ' + mysql.escape(adr);
con.query(sql, function (err, result) {
  if (err) throw err;
  console.log(result);
});

```

#### Escape query values by using the placeholder ? method:

* You can also use a `?` as a placeholder for the values you want to escape.
* In this case,
  * the variable is sent as the second parameter in the `query()` method:

```js
var adr = 'Mountain 21';
var sql = 'SELECT * FROM customers WHERE address = ?';
con.query(sql, [adr], function (err, result) {
  if (err) throw err;
  console.log(result);
});
```

#### Multiple placeholders:

* If you have multiple placeholders,
  * the array contains multiple values, in that order:

```js
var name = 'Amy';
var adr = 'Mountain 21';
var sql = 'SELECT * FROM customers WHERE name = ? OR address = ?';
con.query(sql, [name, adr], function (err, result) {
  if (err) throw err;
  console.log(result);
});
```

## Mysql order by

### ORDER BY ASC :- order by ascending order

```js
var mysql = require('mysql');

var con = mysql.createConnection({
  host: "localhost",
  user: "yourusername",
  password: "yourpassword",
  database: "mydb"
});

con.connect(function(err) {
  if (err) throw err;
  let myQuery = `SELECT * FROM customers ORDER BY name`
  con.query(myQuery, function (err, result) {
    if (err) throw err;
    console.log(result);
  });
});
```

### ORDER BY DESC :- order by descending order

```js
var mysql = require('mysql');

var con = mysql.createConnection({
  host: "localhost",
  user: "yourusername",
  password: "yourpassword",
  database: "mydb"
});

con.connect(function(err) {
  if (err) throw err;
  let myQuery = `SELECT * FROM customers ORDER BY name DESC`
  con.query(myQuery, function (err, result) {
    if (err) throw err;
    console.log(result);
  });
});
```

## MySQL Delete

### Delete Record

* You can delete records from an existing table by using the "DELETE FROM" statement:

```js
// Delete any record with the address "Mountain 21":

var mysql = require('mysql');

var con = mysql.createConnection({
  host: "localhost",
  user: "yourusername",
  password: "yourpassword",
  database: "mydb"
});

con.connect(function(err) {
  if (err) throw err;
  var sql = "DELETE FROM customers WHERE address = 'Mountain 21'";
  con.query(sql, function (err, result) {
    if (err) throw err;
    console.log("Number of records deleted: " + result.affectedRows);
  });
});

```

### Delete a Table

* You can delete an existing table by using the "DROP TABLE" statement:

```js
// Delete the table "customers":
var mysql = require('mysql');

var con = mysql.createConnection({
  host: "localhost",
  user: "yourusername",
  password: "yourpassword",
  database: "mydb"
});

con.connect(function(err) {
  if (err) throw err;
  var sql = "DROP TABLE customers";
  con.query(sql, function (err, result) {
    if (err) throw err;
    console.log("Table deleted");
  });
});

```

### Drop Only if Exist

* If the the table you want to delete is already deleted,
  * or for any other reason does not exist,
  * you can use the IF EXISTS keyword to avoid getting an error.

```js
Delete the table "customers" if it exists:

var mysql = require('mysql');

var con = mysql.createConnection({
  host: "localhost",
  user: "yourusername",
  password: "yourpassword",
  database: "mydb"
});

con.connect(function(err) {
  if (err) throw err;
  var sql = "DROP TABLE IF EXISTS customers";
  con.query(sql, function (err, result) {
    if (err) throw err;
    console.log(result);
  });
});
```

## MySQL Update

### Update Table

* You can update existing records in a table by using the "UPDATE" statement:

```js
// Overwrite the address column from "Valley 345" to "Canyon 123":

var mysql = require('mysql');

var con = mysql.createConnection({
  host: "localhost",
  user: "yourusername",
  password: "yourpassword",
  database: "mydb"
});

con.connect(function(err) {
  if (err) throw err;
  var sql = "UPDATE customers SET address = 'Canyon 123' WHERE address = 'Valley 345'";
  con.query(sql, function (err, result) {
    if (err) throw err;
    console.log(result.affectedRows + " record(s) updated");
  });
});
```

## MySQL Limit

### Limit the Result

* You can limit the number of records returned from the query,
  * by using the "LIMIT" statement:

```js
Select the 5 first records in the "customers" table:

var mysql = require('mysql');

var con = mysql.createConnection({
  host: "localhost",
  user: "yourusername",
  password: "yourpassword",
  database: "mydb"
});

con.connect(function(err) {
  if (err) throw err;
  var sql = "SELECT * FROM customers LIMIT 5";
  con.query(sql, function (err, result) {
    if (err) throw err;
    console.log(result);
  });
});

```

### Start From Another Position

* If you want to return five records,
  * starting from the third record,
  * you can use the "OFFSET" keyword:

```js
// Start from position 3, and return the next 5 records:

var mysql = require('mysql');

var con = mysql.createConnection({
  host: "localhost",
  user: "yourusername",
  password: "yourpassword",
  database: "mydb"
});

con.connect(function(err) {
  if (err) throw err;
  var sql = "SELECT * FROM customers LIMIT 5 OFFSET 2";
  con.query(sql, function (err, result) {
    if (err) throw err;
    console.log(result);
  });
});
```

### Shorter Syntax

* You can also write your SQL statement like this "LIMIT 2, 5"
  * which returns the same as the offset example above:

```js
// Start from position 3, and return the next 5 records:

var mysql = require('mysql');

var con = mysql.createConnection({
  host: "localhost",
  user: "yourusername",
  password: "yourpassword",
  database: "mydb"
});

con.connect(function(err) {
  if (err) throw err;
  var sql = "SELECT * FROM customers LIMIT 2, 5";
  con.query(sql, function (err, result) {
    if (err) throw err;
    console.log(result);
  });
});
```

## MySQL Join

### Join Two or More Tables

* You can combine rows from two or more tables, based on a related column between them, by using a JOIN statement.

```js
var mysql = require('mysql');

var con = mysql.createConnection({
  host: "localhost",
  user: "yourusername",
  password: "yourpassword",
  database: "mydb"
});

con.connect(function(err) {
  if (err) throw err;
  var sql = "SELECT users.name AS user, products.name AS favorite FROM users JOIN products ON users.favorite_product = products.id";
  con.query(sql, function (err, result) {
    if (err) throw err;
    console.log(result);
  });
});
```

# basics :- connect with mongodb

* install mongodb package via npm
  * run `npm install mongodb` in command line

## Creating a Database

```js
var MongoClient = require('mongodb').MongoClient;
var mongoDbServerUrl = `mongodb://localhost:27017/`
var dataBaseName = `mydb`;
var url = mongoDbServerUrl + dataBaseName;
// var url = `mongodb://localhost:27017/mydb`;

MongoClient.connect(url, function(err, db) {
  if (err) throw err;
  console.log("Database created!");
  db.close();
});

```

## Creating a Collection

To create a collection in MongoDB, use the createCollection() method:

```js
// Create a collection called "customers":

var MongoClient = require('mongodb').MongoClient;
var mongoDbServerUrl = "mongodb://localhost:27017/";

MongoClient.connect(mongoDbServerUrl, function(err, db) {
  if (err) throw err;
  var dbo = db.db("myDataBaseName");
  dbo.createCollection("collectionName", function(err, res) {
    if (err) throw err;
    console.log("Collection created!");
    db.close();
  });
});
```

# node event and eventEmitter

## Events in Node.js

* `./demo.txt`

```txt
hello event
```

* `index.js`

```js

var fs = require('fs');
var rs = fs.createReadStream('./demo.txt');
rs.on('open', function () {
  console.log('The file is open');
});

```

## create custom event

### example :-1 :- custom event

```js
var events = require('events');
var eventEmitter = new events.EventEmitter();

//Create an event handler:
var myEventHandler = function () {
  console.log('I hear a scream!');
}

//Assign the event handler to an event:
eventEmitter.on('customEventName', myEventHandler);

//Fire the 'scream' event:
eventEmitter.emit('scream');
```

### example :-2 :- custom event

```js

var events = require('events');
var eventEmitter = new events.EventEmitter();

// Assign the event handler to an event:
eventEmitter.on('customEventName', (name)=>{
  console.log(name , " is speaking");
});

// Fire the 'scream' event:
eventEmitter.emit('customEventName' , "Peter");
```

* output :- `peter is speaking`.

# Asyncronous JavaScript

## Asyncronous vs Synchronous

| Synchronous JavaScript                                                                                                                                                                                                        | Asynchronous JavaScript                                                                                                                                                                                                                                                                    |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Instruction in synchronous code<br /> executes in a given sequence.                                                                                                                                                           | Instructions in asynchronous code can execute <br />in parallel.                                                                                                                                                                                                                           |
| Each operation waits for the previous operation <br />to complete its execution.                                                                                                                                              | Next operation can occur while the previous <br />operation is still getting processed.                                                                                                                                                                                                    |
| Most of the time JavaScript is used <br />as Synchronous code.                                                                                                                                                                | Asynchronous JavaScript is preferred in situations in <br />which execution gets blocked indefinitely.                                                                                                                                                                                     |
| console.log('First'); <br />  console.log('Second'); <br /> console.log('Third');                                                                                                                                             | console.log('First'); <br /> setTimeout(() => console.log('Second'), 2000); <br />console.log('Third');                                                                                                                                                                                    |
| output :- <br /> First  , <br /> Second , <br />Third                                                                                                                                                                         | output :- <br />  First  , <br /> Third  , <br /> Second                                                                                                                                                                                                                                   |
| Every instruction runs once after the <br />previous instruction gets executed. <br />Due to this synchronous nature of javascript, <br />we get the output of console logs in the sequence <br />we provided in the program. | Third gets printed before Second, <br />because of the asynchronous execution of the code. <br />Here setTimeout() function waits for 2 seconds, <br />and in the meantime, the next instruction gets executed <br />without waiting for the previous one to complete <br />the execution. |

## ways to achieve Asynchronous nature of JavaScript

* There are many ways to achieve Asynchronous nature of JavaScript :-
  * CallBacks,
  * timeInterval & timeOut,
  * Promises,
  * Async-Await,
  * fetch,
  * subscribe for observable(in Angular)

## setInterval & setTimeOut- JavaScript

### calls a function repeatedly after a number of milliseconds :-  JAvaScript ....

* If you need repeated executions, use setInterval() instead.
* The `setInterval()` method continues calling the function until `clearInterval()` is called, or the window is closed.
* Use the `clearInterval()` method to prevent the function from `setInterval()` .
* Calls a function or evaluates an expression repeatedly  at specified intervals (in milliseconds) :-
  * `setInterval(function, milliseconds);`   or
  * `myInterval = setInterval(function, milliseconds);`
* Clears a timer set with `setInterval()` :-  `clearInterval(setIntervalFunctionName)`;

### calls a function only once after a number of milliseconds :-  JAvaScript ....

* If you need only once executions, use `setTimeout()` instead.
* Use the `clearTimeout()` method to prevent the function from `setTimeout()`  or from starting .
* Calls a function or evaluates an expression  once at specified intervals (in milliseconds) :-
  * `setTimeout(function, milliseconds);`        or
  * `myTimeout= setTimeout(function, milliseconds);`
* Clears a timer set with `setTimeout()` :-  `clearTimeout(setTimeoutFunctionName);`

## CallBack function :-  JAvaScript ....

> * A callback is a function passed as an argument to another function.

* This technique allows a function to call another function.

> * A callback function can run after another function has finished.

* important symbol
  * `key  = var/let/const`
  * `fN = Function Name`
  * `vN = Variable Name`
  * `fun.. sta.. = function statement(s)`
  * ` arg = Argunment`
  * `par= Parameter`
  * `cbf= Call Back Function`

### Regular Function - callBack Function

```js
function fN(par1, par2, ....., parN, cbf1, cbf2, ....., cbfN){ 
	// function  statement(s)
  cbf1(par1, par2, ..... , parN)
  cbf2(par1, par2, ..... , parN)
    ....................................
  cbf2(para1 , para2, ..... , paraN)
}
```

### Anonymus Function - callBack Function

```js
key  fN= function (par1, par2, ....., parN, cbf1, cbf2, ....., cbfN){ 
	//  function statement(s)
    cbf1(par1 , par2, ..... , parN)
    cbf2(par1 , par2, ..... , parN)
      ....................................
    cbf2(par1 , par2, ..... , parN)
}
```

### Arrow function - callBack Function

```js
key fN= (par1, par2, ....., parN, cbf1, cbf2, ....., cbfN) => { 
	//  function statement(s)
    cbf1(par1 , par2, ..... , parN)
    cbf2(par1 , par2, ..... , parN)
      ....................................
    cbfN(par1 , par2, ..... , parN)
}
```

## Promises- JavaScript

### Promises  :-  Callback Alternatives

* With asynchronous programming,
  * JavaScript programs can start long-running tasks,
  * and continue running other tasks in parallell.
* But, asynchronus programmes are
  * difficult to write and
  * difficult to debug.
* Because of this,
  * most modern asynchronous JavaScript methods don't use callbacks.
* Instead, in JavaScript, asynchronous programming is solved using Promises instead.

> * "Producing code" is code that can take some time.
> * "Consuming code" is code that must wait for the result.
> * A Promise is a JavaScript object that links producing code and consuming code

* `key = let/var/const`

### syntax for   Promises :-  JAvaScript ....

```js
let myPromise = new Promise(function(myResolve, myReject) {
// "Producing Code" (May take some time)
  myResolve(successfullOutput); // when successful
  myReject(errorOutput);  // when error
});


// "Consuming Code" (Must wait for a fulfilled Promise)
myPromise.then(
  function(value) { /* code if successful */ },
  function(error) { /* code if some error */ }
);	
// or
myPromise.then( function(value) { /* code if successful */ }  )
                     .catch( function(error) { /* code if some error */ } );
```

### A Promise is in one of these states:

* **pending :-** initial state, neither fulfilled nor rejected.
* **fulfilled :-** meaning that the operation was completed successfully.
* **rejected :-** meaning that the operation failed.

### Producing code :- Create a Pending Promises

#### Method -1  :- Producing code :- Create a Pending Promises

```js
key myPromise = new Promise(function(myResolve, myReject) {
// "Producing Code" (May take some time)
  myResolve(successfullOutput); // when successful
  myReject(errorOutput);  // when error
});	
```

#### Method -2  :- Producing code :- Create a Pending Promises

```js
key myPromise = new Promise( (myResolve, myReject) => {
// "Producing Code" (May take some time)
  myResolve(successfullOutput); // when successful
  myReject(errorOutput);  // when error
});
```

### "Consuming Code" (Must wait for a fulfilled Promise)  :- use the Promises

#### method1 :- "Consuming Code" (Must wait for a fulfilled Promise)  :- use the Promises

```js
myPromise.then(  function(value) { /*successfulCode*/ }, function(error) { /*errorCode*/ });
```

#### method2 :- "Consuming Code" (Must wait for a fulfilled Promise)  :- use the Promises

```js
myPromise.then( function(value) { /*successfulCode*/ }  ).catch( function(error) { /*errorCode*/ } );
```

#### method3 :- "Consuming Code" (Must wait for a fulfilled Promise)  :- use the Promises

```js
myPromise.then( (value) => { /*successfulCode*/ }, (error) => { /*errorCode*/ });
```

#### method4 :- "Consuming Code" (Must wait for a fulfilled Promise)  :- use the Promise

```js
myPromise.then( (value) => { /*successfulCode*/ }  ).catch(  (error) => { /*errorCode*/ } );
```

#### method5 :- "Consuming Code" (Must wait for a fulfilled Promise)  :- use the Promise

```js
myPromise.then( handleFulfilledFunction, handleRejectedFunction ) ;
```

#### method6 :- "Consuming Code" (Must wait for a fulfilled Promise)  :- use the Promise

```js
myPromise.then( handleFulfilledFunction).catch( handleRejectedFunction );
```

* here handleFulfilledFunction :-
  * `function(value) { /*successfulCode*/ }` :- // or
  * `(value) => { /*successfulCode*/ }`
* here handleRejectedFunction :-
  * `function(error) { /*errorCode*/ }` :- // or
  * `(error) => { /*errorCode*/ }`

### chained promise

#### method 1 :- chained promise

```js

myPromise.then( handleFulfilledFunction1 , handleRejectedFunction1 )
                     .then( handleFulfilledFunction2 , handleRejectedFunction2 )
                     .then( handleFulfilledFunction3 , handleRejectedFunction3 )
                     .then( handleFulfilledFunction4 , handleRejectedFunction4 )
                     .then( handleFulfilledFunction5 , handleRejectedFunction5 )
```

> or

#### method 2 :- chained promise

```js

myPromise.then( handleFulfilledFunction1 )
                     .then( handleFulfilledFunction2 )
                     .then( handleFulfilledFunction3 )
                     .then( handleFulfilledFunction4 )
                     .then( handleFulfilledFunction5 )
                     .catch( handleRejectedFunctionAny )
```

### nested promise

```js
let promiseA = new Promise(myExecutorFunc);
let promiseB = promiseA.then(handleFulfilled1, handleRejected1);
let promiseC = promiseA.then(handleFulfilled2, handleRejected2);
// or
(promiseD, (promiseC, (promiseB, (promiseA) ) ) )
```

### Promise static method   reject and resolve ....

* Returns a new Promise object that is rejected with the given reason.
  * :-  `Promise.reject(reason)`
  * `Promise.reject(reason).then( handleFulfilledFunction, handleRejectedFunction )` ;
  * or , `Promise.reject(reason).then( handleFulfilledFunction).catch( handleRejectedFunction );`
  * ex:- `Promise.reject( new Error('fail')).then( handleFulfilledFunction).catch( handleRejectedFunction );`
* Returns a new Promise object that is resolved with the given value.
  * If the value is a thenable (i.e. has a then method),
    * the returned promise will "follow" that thenable,
    * adopting its eventual state; otherwise,
    * the returned promise will be fulfilled with the value.Generally,
    * if you don't know if a value is a promise or not, `Promise.resolve(value)`
    * it instead and work with the return value as a promise. :-
      * :-  `Promise.resolve(value)`
      * `Promise.resolve(value).then( handleFulfilledFunction ) ;`
      * or , `Promise.resolve(value).then( handleFulfilledFunction, handleRejectedFunction ) ;`
      * or , `Promise.resolve(value).then( handleFulfilledFunction).catch( handleRejectedFunction );`
      * ex:- `Promise.resolve( 123).then( handleFulfilledFunction).catch( handleRejectedFunction );`

#### Returns a new Promise object that is rejected with the given reason.

```js
// Returns a new Promise object that is rejected with the given reason.
Promise.reject(reason)
// or
Promise.reject(reason).then( handleFulfilledFunction, handleRejectedFunction );
// or
Promise.reject(reason).then( handleFulfilledFunction).catch( handleRejectedFunction );


// example
Promise.reject( new Error('fail')).then( handleFulfilledFunction).catch( handleRejectedFunction );`
```

#### Returns a new Promise object that is resolved with the given value.

* Returns a new Promise object that is resolved with the given value.
  * If the value is a thenable (i.e. has a then method),
    * the returned promise will "follow" that thenable,
    * adopting its eventual state; otherwise,
    * the returned promise will be fulfilled with the value.Generally,
    * if you don't know if a value is a promise or not, `Promise.resolve(value)`
    * it instead and work with the return value as a promise. :- `Promise.resolve(value)`

```js
// Returns a new Promise object that is resolved with the given value.
Promise.resolve(value)
// or
Promise.resolve(value).then( handleFulfilledFunction ) ;
// or
Promise.resolve(value).then( handleFulfilledFunction, handleRejectedFunction ) ;
// or
Promise.resolve(value).then( handleFulfilledFunction).catch( handleRejectedFunction );


// example
Promise.resolve( 123).then( handleFulfilledFunction).catch( handleRejectedFunction );
```

### Promise Concurrency    all, allSettled, any, race  ....

* Fulfills when all of the promises fulfill; rejects when any of the promises rejects   :-
  * `Promise.all(iterable);`
  * `Promise.all(iterable).then( handleFulfilledFunction, handleRejectedFunction );`
  * or , `Promise.all(iterable).then( handleFulfilledFunction).catch( handleRejectedFunction );`
  * ex:- `Promise.all([promise1, promise2, promise3]).then( handleFulfilledFunction).catch( handleRejectedFunction );`
* Fulfills when all promises settle. :-
  * `Promise.allSettled(iterable)`
  * `Promise.allSettled(iterable).then( handleFulfilledFunction, handleRejectedFunction );`
  * or , `Promise.allSettled(iterable).then( handleFulfilledFunction).catch( handleRejectedFunction );`
  * ex:- `Promise.allSettled([promise1, promise2, promise3]).then( handleFulfilledFunction);`
* Fulfills when any of the promises fulfills; rejects when all of the promises reject.  :-
  * `Promise.any(iterable);`
  * or , `Promise.any(iterable).then( handleFulfilledFunction, handleRejectedFunction );`
  * or , `Promise.any(iterable).then( handleFulfilledFunction).catch( handleRejectedFunction );`
  * ex:- `Promise.any([promise1, promise2, promise3]).then( handleFulfilledFunction).catch( handleRejectedFunction );`
* Settles when any of the promises settles.
  * In other words,
    * fulfills when any of the promises fulfills;
    * rejects when any of the promises rejects. :-
  * `Promise.race(iterable);`
  * `Promise.race(iterable).then( handleFulfilledFunction, handleRejectedFunction );`
  * or , `Promise.race(iterable).then( handleFulfilledFunction).catch( handleRejectedFunction );`
  * ex:- `Promise.race([promise1, promise2, promise3]).then( handleFulfilledFunction).catch( handleRejectedFunction );`

#### Fulfills when all of the promises fulfill; rejects when any of the promises rejects   :-

```js
Promise.all(iterable);
// or
Promise.all(iterable).then( handleFulfilledFunction, handleRejectedFunction );
// or
Promise.all(iterable).then( handleFulfilledFunction).catch( handleRejectedFunction );


// Example
Promise.all([promise1, promise2, promise3]).then( handleFulfilledFunction).catch( handleRejectedFunction );
```

#### Fulfills when all promises settle. :-

```js
Promise.allSettled(iterable)
// or
Promise.allSettled(iterable).then( handleFulfilledFunction, handleRejectedFunction );
// or
Promise.allSettled(iterable).then( handleFulfilledFunction).catch( handleRejectedFunction );


// Example
Promise.allSettled([promise1, promise2, promise3]).then( handleFulfilledFunction);
```

#### Fulfills when any of the promises fulfills; rejects when all of the promises reject.  :-

```js
Promise.any(iterable);
// or
Promise.any(iterable).then( handleFulfilledFunction, handleRejectedFunction );
// or
Promise.any(iterable).then( handleFulfilledFunction).catch( handleRejectedFunction );


// Example
Promise.any([promise1, promise2, promise3]).then( handleFulfilledFunction).catch( handleRejectedFunction );
```

#### Settles when any of the promises settles. In other words, fulfills when any of the promises fulfills; rejects when any of the promises rejects. :-

```js
Promise.race(iterable);
// or
Promise.race(iterable).then( handleFulfilledFunction, handleRejectedFunction );
// or
Promise.race(iterable).then( handleFulfilledFunction).catch( handleRejectedFunction );


// example
Promise.race([promise1, promise2, promise3]).then( handleFulfilledFunction).catch( handleRejectedFunction );
```

### Promise instance method  then, catch, finally ....

* Appends fulfillment and rejection handlers to the promise, and returns a new promise resolving to the return value of the called handler, or to its original settled value if the promise was not handled (i.e. if the relevant handler onFulfilled or onRejected is not a function)  :-
  * `then( handleFulfilledFunction )`   or
  * `then(  function(value) { /*successfulCode*/ })`  or
  * `then( handleFulfilledFunction , function(error) { /*errorCode*/ })` or
  * `then(  function(value) { /*successfulCode*/ }, handleRejectedFunction )` or
  * `then( handleFulfilledFunction, handleRejectedFunction )` or
  * `then(  function(value) { /*successfulCode*/ }, function(error) { /*errorCode*/ })`
  * method1 :- `myPromise.then(  function(value) { /*successfulCode*/ }, function(error) { /*errorCode*/ });`
  * method2 :- `myPromise.then( function(value) { /*successfulCode*/ }  );`
  * method3 :- `myPromise.then( (value) => { /*successfulCode*/ }, (error) => { /*errorCode*/ });`
  * method4 :- `myPromise.then( (value) => { /*successfulCode*/ }  );`
  * method5 :- `myPromise.then( handleFulfilledFunction, handleRejectedFunction ) ;`
  * method6 :- `myPromise.then( handleFulfilledFunction) ;`
* Appends a rejection handler callback to the promise, and returns a new promise resolving to the return value of the callback if it is called, or to its original fulfillment value if the promise is instead fulfilled.  :-
  * `catch(  handleRejectedFunction )`    or
  * `catch(  function(error) { /*errorCode*/ })`
  * method1 :- `myPromise.catch( function(error) { /*errorCode*/ } );`
  * method2 :- `myPromise.catch(  (error) => { /*errorCode*/ } );`
  * method3 :- `myPromise.catch( handleRejectedFunction );`
* Appends a handler to the promise, and returns a new promise that is resolved when the original promise is resolved. The handler is called when the promise is settled, whether fulfilled or rejected..  : -
  * `finally(  onFinallyFunction )`          or
  * `finally( () => { /*afterSetteledCode*/ } )`
  * method1 :- `myPromise.then(  function(value) { /*successfulCode*/ }, function(error) { /*errorCode*/ }).finally(  onFinallyFunction );`
  * method2 :- `myPromise.then( function(value) { /*successfulCode*/ }  ).catch( function(error) { /*errorCode*/ } ).finally( () => { /*afterSetteledCode*/ } );`
  * method3 :- `myPromise.then( (value) => { /*successfulCode*/ }, (error) => { /*errorCode*/ }).finally( () => { /*afterSetteledCode*/ } );`
  * method4 :- `myPromise.then( (value) => { /*successfulCode*/ }  ).catch(  (error) => { /*errorCode*/ } ).finally( () => { /*afterSetteledCode*/ } );`
  * method5 :- `myPromise.then( handleFulfilledFunction, handleRejectedFunction ).finally(  onFinallyFunction ) ;`
  * method6 :- `myPromise.then( handleFulfilledFunction).catch( handleRejectedFunction ).finally(  onFinallyFunction );`

#### Appends fulfillment and rejection handlers to the promise, and returns a new promise resolving to the return value of the called handler, or to its original settled value if the promise was not handled (i.e. if the relevant handler onFulfilled or onRejected is not a function)  :-

```js
// Appends fulfillment and rejection handlers to the promise, and returns a new promise resolving to the return value of the called handler, or to its original settled value if the promise was not handled (i.e. if the relevant handler onFulfilled or onRejected is not a function)  :-   
then( handleFulfilledFunction )   
// or   
then(  function(value) { /*successfulCode*/ })  
// or   
then( handleFulfilledFunction , function(error) { /*errorCode*/ }) 
// or
then(  function(value) { /*successfulCode*/ }, handleRejectedFunction ) 
// or 
then( handleFulfilledFunction, handleRejectedFunction ) 
// or   
then(  function(value) { /*successfulCode*/ }, function(error) { /*errorCode*/ })





// method1 :- 
myPromise.then(  function(value) { /*successfulCode*/ }, function(error) { /*errorCode*/ });
// method2 :- 
myPromise.then( function(value) { /*successfulCode*/ }  );
// method3 :- 
myPromise.then( (value) => { /*successfulCode*/ }, (error) => { /*errorCode*/ });
// method4 :- 
myPromise.then( (value) => { /*successfulCode*/ }  );
// method5 :- 
myPromise.then( handleFulfilledFunction, handleRejectedFunction ) ;
// method6 :- 
myPromise.then( handleFulfilledFunction) ;
```

#### Appends a rejection handler callback to the promise, and returns a new promise resolving to the return value of the callback if it is called, or to its original fulfillment value if the promise is instead fulfilled.  :-

```js
// Appends a rejection handler callback to the promise, 
// and returns a new promise resolving to the return value of the callback if it is called, 
// or to its original fulfillment value if the promise is instead fulfilled.  :-   
catch(  handleRejectedFunction )  
// or   
catch(  function(error) { /*errorCode*/ })


// method1 :- 
myPromise.catch( function(error) { /*errorCode*/ } );
// method2 :- 
myPromise.catch(  (error) => { /*errorCode*/ } );
// method3 :- 
myPromise.catch( handleRejectedFunction );
```

#### Appends a handler to the promise, and returns a new promise that is resolved when the original promise is resolved. The handler is called when the promise is settled, whether fulfilled or rejected..  : -

```js
// Appends a handler to the promise, 
// and returns a new promise that is resolved when the original promise is resolved. 
// The handler is called when the promise is settled, whether fulfilled or rejected..  : - 
finally(  onFinallyFunction )        
// or     
finally( () => { /*afterSetteledCode*/ } )      


// method1 :- 
myPromise.then(  function(value) { /*successfulCode*/ }, function(error) { /*errorCode*/ }).finally(  onFinallyFunction );
// method2 :- 
myPromise.then( function(value) { /*successfulCode*/ }  ).catch( function(error) { /*errorCode*/ } ).finally( () => { /*afterSetteledCode*/ } );
// method3 :- 
myPromise.then( (value) => { /*successfulCode*/ }, (error) => { /*errorCode*/ }).finally( () => { /*afterSetteledCode*/ } );
// method4 :- 
myPromise.then( (value) => { /*successfulCode*/ }  ).catch(  (error) => { /*errorCode*/ } ).finally( () => { /*afterSetteledCode*/ } );
// method5 :- 
myPromise.then( handleFulfilledFunction, handleRejectedFunction ).finally(  onFinallyFunction ) ;
// method6 :- 
myPromise.then( handleFulfilledFunction).catch( handleRejectedFunction ).finally(  onFinallyFunction );
```

## Async And Await

### intoduction :- Async and await

* "async and await make promises easier to write".

> * async makes a function return a Promise.
>   * syntax:-  `async function myPromise() {return promise }`

> * await makes a function wait for a Promise.
>   * syntax:-  `await promise `

> * **async function always return a promise.**
> * The async function declaration declares an async function
>   * where the await keyword is permitted within the function body.
> * The async and await keywords enable asynchronous,
>   * promise-based behavior to be written in a cleaner style,
>   * avoiding the need to explicitly configure promise chains.

> * The await keyword can only be used inside an async function.
> * The await keyword makes the function pause the execution and
>   * wait for a resolved promise before it continues:

### we know That :- Create a Pending Promises

```js
let myPromise = new Promise(function(myResolve, myReject) {
// "Producing Code" (May take some time)
  myResolve(successfullOutput); // when successful
  myReject(errorOutput);  // when error
});	

// or

let myPromise = new Promise( (myResolve, myReject) => {
// "Producing Code" (May take some time)
  myResolve(successfullOutput); // when successful
  myReject(errorOutput);  // when error
});
```

### one example to understand the relationship  between promises and async

```js
async function myPromise() {
  return "Hello";
}

// Is the same as:

function myPromise() {
  return Promise.resolve("Hello");
}
```

* we know that how to use promises

### "Consuming Code" (Must wait for a fulfilled Promise)  :- use the Promises

```js
// method1 :- 
myPromise.then(  function(value) { /*successfulCode*/ }, function(error) { /*errorCode*/ });
// method2 :- 
myPromise.then( function(value) { /*successfulCode*/ }  ).catch( function(error) { /*errorCode*/ } );
// method3 :- 
myPromise.then( (value) => { /*successfulCode*/ }, (error) => { /*errorCode*/ });
// method4 :- 
myPromise.then( (value) => { /*successfulCode*/ }  ).catch(  (error) => { /*errorCode*/ } );
// method5 :- 
myPromise.then( handleFulfilledFunction, handleRejectedFunction ) ;
// method6 :- 
myPromise.then( handleFulfilledFunction).catch( handleRejectedFunction );




// here handleFulfilledFunction :-  
function(value) { /*successfulCode*/ } :-  (value) => { /*successfulCode*/ }

// here handleRejectedFunction :-  
function(error) { /*errorCode*/ } :-  (error) => { /*errorCode*/ } 
```

### an example to use async

```js
async function myFunction() {
  return "Hello";
}
myFunction().then(
  function(value) {console.log(value);}
);
```

### an example to use async

```js
async function myDisplay() {
  let myPromise = new Promise(function(resolve, reject) {
    resolve("I love You !!");
  });
  console.log(await myPromise);
}

myDisplay();
```

# express js introduction

# routing with express js

# middle-ware

# open  file with router
